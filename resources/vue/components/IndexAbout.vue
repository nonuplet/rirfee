<script setup lang="ts">
import anime from 'animejs/lib/anime.es'
import { onMounted } from 'vue'
import { AppearEvent } from '../../ts/utils/AppearEvent'

const appearedBgText = () => {
  const timeline = anime.timeline()
  timeline.add({
    targets: '#about-background-text svg .cls-1',
    strokeDashoffset: [anime.setDashoffset, 0],
    easing: 'easeInOutSine',
    duration: 1500,
    delay: function (el, i) {
      return i * 250
    },
    direction: 'alternate',
    loop: false,
  })
}

onMounted(() => {
  const bgText = document.getElementById('about-background-text')
  const bgTextIntersection = new AppearEvent(bgText)
  bgTextIntersection.addAppearEvent(appearedBgText)
})
</script>

<template>
  <section id="about">
    <div id="about-background-text">
      <svg viewBox="0 0 500 104">
        <path
          class="cls-1"
          d="m97.2,95.68h25.6L93.95,8.32h-32.42l-28.84,87.37h25.6l5.05-16.72h28.81l5.05,16.72Zm-28.5-34.47l8.71-28.84h.68l8.71,28.84h-18.09Z"
        />
        <path
          class="cls-1"
          d="m131.21,95.68V8.32h37.88c6.66,0,12.24.9,16.77,2.69,4.55,1.79,7.98,4.32,10.28,7.59,2.33,3.27,3.5,7.12,3.5,11.56,0,3.21-.71,6.14-2.13,8.79-1.39,2.64-3.36,4.86-5.89,6.66-2.53,1.76-5.49,2.99-8.87,3.67v.85c3.75.14,7.17,1.1,10.24,2.86,3.07,1.73,5.52,4.14,7.34,7.21,1.82,3.04,2.73,6.63,2.73,10.75,0,4.78-1.25,9.03-3.75,12.76-2.47,3.73-6,6.65-10.58,8.79-4.58,2.13-10.04,3.2-16.38,3.2h-41.12Zm23.72-18.94h11.09c3.98,0,6.97-.74,8.96-2.22,1.99-1.51,2.99-3.73,2.99-6.66,0-2.05-.47-3.78-1.41-5.2-.94-1.42-2.28-2.5-4.01-3.24-1.71-.74-3.77-1.11-6.19-1.11h-11.43v18.43Zm0-33.1h9.73c2.08,0,3.91-.33,5.5-.98,1.59-.65,2.83-1.59,3.71-2.82.91-1.25,1.36-2.77,1.36-4.56,0-2.7-.97-4.76-2.9-6.19-1.93-1.45-4.38-2.18-7.34-2.18h-10.07v16.72Z"
        />
        <path
          class="cls-1"
          d="m296.09,52c0,9.73-1.89,17.93-5.67,24.62-3.78,6.65-8.89,11.7-15.32,15.14-6.43,3.41-13.59,5.12-21.5,5.12s-15.16-1.72-21.59-5.16c-6.4-3.47-11.49-8.53-15.27-15.19-3.75-6.68-5.63-14.86-5.63-24.53s1.88-17.92,5.63-24.57c3.78-6.68,8.87-11.73,15.27-15.14,6.43-3.44,13.62-5.16,21.59-5.16s15.07,1.72,21.5,5.16c6.43,3.41,11.53,8.46,15.32,15.14,3.78,6.66,5.67,14.85,5.67,24.57Zm-24.4,0c0-5.23-.7-9.64-2.09-13.22-1.37-3.61-3.4-6.34-6.1-8.19-2.67-1.88-5.97-2.82-9.9-2.82s-7.24.94-9.94,2.82c-2.67,1.85-4.71,4.58-6.1,8.19-1.37,3.58-2.05,7.99-2.05,13.22s.68,9.66,2.05,13.27c1.39,3.58,3.43,6.31,6.1,8.19,2.7,1.85,6.02,2.77,9.94,2.77s7.22-.92,9.9-2.77c2.7-1.88,4.74-4.61,6.1-8.19,1.39-3.61,2.09-8.03,2.09-13.27Z"
        />
        <path
          class="cls-1"
          d="m358.77,8.32h23.72v55.97c0,6.66-1.59,12.41-4.78,17.28-3.16,4.84-7.57,8.58-13.22,11.22-5.66,2.62-12.23,3.93-19.71,3.93s-14.13-1.31-19.79-3.93c-5.66-2.64-10.07-6.38-13.22-11.22-3.13-4.86-4.69-10.62-4.69-17.28V8.32h23.72v53.92c0,2.7.6,5.12,1.79,7.25,1.19,2.1,2.84,3.75,4.95,4.95,2.13,1.19,4.55,1.79,7.25,1.79s5.15-.6,7.25-1.79c2.1-1.19,3.75-2.84,4.95-4.95,1.19-2.13,1.79-4.55,1.79-7.25V8.32Z"
        />
        <polygon
          class="cls-1"
          points="391.37 8.32 391.37 27.43 417.65 27.43 417.65 95.68 441.03 95.68 441.03 27.43 467.31 27.43 467.31 8.32 391.37 8.32"
        />
      </svg>
    </div>
  </section>
</template>

<style scoped lang="sass">
#about
  @apply relative w-full mt-20

#about-background-text
  @apply absolute top-0 -right-20 h-fit w-5/6
  svg
    .cls-1
      @apply fill-[rgba(0,0,0,0)] stroke-[2px] stroke-[#D9D9D9]
      stroke-linejoin: round
      stroke-linecap: round
</style>
